<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <IsPackable>true</IsPackable>
    <PackageId>System.CommandLine</PackageId>
    <TargetFrameworks>$(TargetFrameworkForNETSDK);netstandard2.0</TargetFrameworks>
    <Nullable>enable</Nullable>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <LangVersion>latest</LangVersion>
    <Description>Support for parsing command lines, supporting both POSIX and Windows conventions and shell-agnostic command line completions.</Description>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
    <EnableDefaultCompileItems>False</EnableDefaultCompileItems>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)' == '$(TargetFrameworkForNETSDK)'">
    <IsTrimmable>true</IsTrimmable>
    <EnableTrimAnalyzer>true</EnableTrimAnalyzer>
    <EnableSingleFileAnalyzer>true</EnableSingleFileAnalyzer>
  </PropertyGroup>
   
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DebugType>portable</DebugType>
  </PropertyGroup>
   
  <ItemGroup>
    <Compile Include="AliasSet.cs" />
    <Compile Include="ArgumentArity.cs" />
    <Compile Include="Binding\ArgumentConversionResult.cs" />
    <Compile Include="CliValueSymbol.cs" />
    <Compile Include="ICliValueSymbol.cs" />
    <Compile Include="Parsing\CliCommandResult.cs" />
    <Compile Include="Parsing\CliDiagnosticDescriptor.cs" />
    <Compile Include="Parsing\CliDiagnosticSeverity.cs" />
    <Compile Include="Parsing\CliSymbolResult.cs" />
    <Compile Include="Parsing\ParseDiagnostics.cs" />
    <Compile Include="Parsing\SymbolLookupByName.cs" />
    <Compile Include="Parsing\ValueResultOutcome.cs" />
    <Compile Include="Binding\ArgumentConversionResultType.cs" />
    <Compile Include="Binding\ArgumentConverter.cs" />
    <Compile Include="Binding\ArgumentConverter.DefaultValues.cs" />
    <Compile Include="Binding\ArgumentConverter.StringConverters.cs" />
    <Compile Include="Binding\TryConvertArgument.cs" />
    <Compile Include="Binding\TypeExtensions.cs" />
    <Compile Include="ChildSymbolList{T}.cs" />
    <Compile Include="CliArgument.cs" />
    <Compile Include="CliArgument{T}.cs" />
    <Compile Include="CliCommand.cs" />
    <Compile Include="CliConfiguration.cs" />
    <Compile Include="CliDirective.cs" />
    <Compile Include="CliExecutable.cs" />
    <Compile Include="CliOption.cs" />
    <Compile Include="CliOption{T}.cs" />
    <Compile Include="CliRootCommand.cs" />
    <Compile Include="CliSymbol.cs" />
    <Compile Include="LocalizationResources.cs" />
    <Compile Include="ParseResult.cs" />
    <Compile Include="Parsing\CliArgumentResultInternal.cs" />
    <Compile Include="Parsing\CliParser.cs" />
    <Compile Include="Parsing\CliToken.cs" />
    <Compile Include="Parsing\CliTokenType.cs" />
    <Compile Include="Parsing\CliCommandResultInternal.cs" />
    <Compile Include="Parsing\Location.cs" />
    <Compile Include="Parsing\CliOptionResultInternal.cs" />
    <Compile Include="Parsing\CliDiagnostic.cs" />
    <Compile Include="Parsing\ParseOperation.cs" />
    <Compile Include="Parsing\StringExtensions.cs" />
    <Compile Include="Parsing\CliSymbolResultInternal.cs" />
    <Compile Include="Parsing\SymbolResultTree.cs" />
    <Compile Include="Parsing\CliValueResult.cs" />
    <Compile Include="Properties\Resources.Designer.cs" />
    <Compile Include="SymbolNode.cs" />
    <Compile Include="..\Common\Compat\**\*.cs" Link="Compat\%(RecursiveDir)%(Filename).%(Extension)" />
  </ItemGroup>

  <ItemGroup>
    <!-- This was added to allow tests of tokenization -->
    <InternalsVisibleTo Include="System.CommandLine.Tests" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard2.0'">
    <PackageReference Include="System.Memory" />
    <PackageReference Include="System.Collections.Immutable" />
  </ItemGroup>

  <ItemGroup>
    <Compile Update="Properties\Resources.Designer.cs">
      <DesignTime>True</DesignTime>
      <AutoGen>True</AutoGen>
      <DependentUpon>Resources.resx</DependentUpon>
    </Compile>
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Update="Properties\Resources.resx" GenerateSource="true">
      <Generator>ResXFileCodeGenerator</Generator>
      <LastGenOutput>Resources.Designer.cs</LastGenOutput>
    </EmbeddedResource>
  </ItemGroup>

  <ItemGroup>
    <InternalsVisibleTo Include="System.CommandLine.NamingConventionBinder" />
  </ItemGroup>

</Project>
